<!DOCTYPE html>
<html class="ui-mobile"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><!-- base href="http://hhmoodle.haaga-helia.fi/pluginfile.php/891730/mod_resource/content/2/lisaosa.html" -->
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
  
  	<meta http-equiv="Content-Security-Policy" content="
		default-src 'self' 'unsafe-inline' http://myy.haaga-helia.fi/ ws://10.3.124.233:3000 http://code.jquery.com https://code.jquery.com http://cdn.jtsage.com http://ajax.aspnetcdn.com https://maps.googleapis.com https://csi.gstatic.com https://maps.gstatic.com https://fonts.googleapis.com https://fonts.gstatic.com https://khms1.googleapis.com/ https://khms0.googleapis.com https://ssl.gstatic.com gap: data: blob: filesystem: ; 
	">
	
    <link rel="stylesheet" href="lisaosa2_files/jquery.css">

	<script src="lisaosa2_files/jquery-2.js" integrity="sha256-siFczlgw4jULnUICcdm9gjQPZkw/YPDqhQ9+nAOScE4=" crossorigin="anonymous" style=""></script>
	
	<script src="lisaosa2_files/jquery.js"></script>


<link href="lisaosa2_files/jtsage-datebox-4.css" rel="stylesheet" type="text/css">
    
<script src="lisaosa2_files/jtsage-datebox-4.js" type="text/javascript"></script>
    
<script src="lisaosa2_files/jtsage-datebox.js" type="text/javascript"></script>

<script src="lisaosa2_files/jquery_002.js"></script>


    <link rel="stylesheet" type="text/css" href="lisaosa2_files/index.htm">

	<link rel="stylesheet" type="text/css" href="lisaosa2_files/icon-pack-custom.htm">

	<link rel="stylesheet" href="lisaosa2_files/my-custom-theme.htm">
    <link rel="stylesheet" href="lisaosa2_files/jquery.htm">
<!--
    <link rel="stylesheet" href="css/themes/mobiili.css" />
-->
    <link rel="stylesheet" href="lisaosa2_files/jquery.htm">
    
    <style type="text/css">
        .virhe {
            color: red;
            font-size: 130%;
        }
        input.kenttaVirhe {
            border: 1px solid red;
        }
        
        #map {
            height: 100%;
        }
    </style>
    <title>Etusivu</title>
<script type="text/javascript" charset="UTF-8" src="lisaosa2_files/common.js"></script><script type="text/javascript" charset="UTF-8" src="lisaosa2_files/util.js"></script><script type="text/javascript" charset="UTF-8" src="lisaosa2_files/stats.js"></script></head>

<body class="ui-mobile-viewport ui-overlay-a">	
	<div style="display: none;" id="popupMenu-placeholder"><!-- placeholder for popupMenu --></div>
	
	<!-- Vain dynaamiset header ja footer ominaisuudella data-position="fixed" pysyvät paikallaan vilkkumatta, kun sivua vaihdetaan -->
	<div data-role="header" data-theme="a" data-position="fixed" role="banner" class="ui-header ui-bar-a ui-header-fixed slidedown">
		<a href="#popupMenu" data-rel="popup" data-transition="flip" class=" ui-btn-left ui-btn ui-icon-bars ui-btn-icon-notext ui-btn-inline ui-corner-all" data-role="button" aria-haspopup="true" aria-owns="popupMenu" aria-expanded="false" role="button">Menu</a>
		<h1 class="ui-title" role="heading" aria-level="1">Etusivu</h1>
		<div data-role="navbar" id="navi" class="ui-navbar" role="navigation">
			<ul class="ui-grid-d">
				<li class="ui-block-a"><a href="#etusivu" class="ui-btn ui-icon-home ui-btn-icon-top  ui-mini ui-btn-active">Etusivu</a></li>
				<li class="ui-block-b"><a href="#paivakirjaSivu" class="ui-btn ui-icon-briefcase ui-btn-icon-top ui-mini">Päiväkirja</a></li>
				<li class="ui-block-c"><a href="#saaSivu" class="ui-btn ui-icon-umbrella ui-btn-icon-top ui-mini">Sää</a></li>
				<li class="ui-block-d"><a href="#etaisyysSivu" class="ui-btn ui-icon-glass ui-btn-icon-top ui-mini">Etäisyys</a></li>
				<li class="ui-block-e"><a href="#ruokaSivu" class="ui-btn ui-icon-cutlery ui-btn-icon-top ui-mini">Ruoka</a></li>

			</ul>
		</div>
	</div>
	
	
	
	<div data-role="panel" id="panelMenu" data-display="overlay" data-theme="a" class="ui-panel ui-panel-position-left ui-panel-display-overlay ui-panel-closed ui-body-a ui-panel-animate"> 
		<div class="ui-panel-inner"><ul data-role="listview" class="ui-listview">
			<li class="ui-first-child"><a href="#etusivu" class="ui-btn">Etusivu</a></li>
			<li><a href="#paivakirjaSivu" class="ui-btn">Päiväkirja</a></li>
			<li><a href="#saaSivu" class="ui-btn">Sää</a></li>
			<li><a href="#etaisyysSivu" class="ui-btn">Etäisyys</a></li>
			<li class="ui-last-child"><a href="#ruokaSivu" class="ui-btn">Ruoka</a></li>
		</ul></div>
	</div>
		 
	<div data-role="page" id="etusivu" data-title="Etusivu" data-url="etusivu" tabindex="0" class="ui-page ui-page-theme-a ui-page-active" style="padding-top: 102px; padding-bottom: 45px; min-height: 532px;">
	
	    <div role="main" class="ui-content ui-body-a" style="height: 497px;">
            
            <!-- <div id="map"></div> -->
            
            <h3>Kurssisisältö</h3>
            <div data-role="collapsibleset" id="sisalto">
                
            </div>
            
	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="paivakirjaSivu" data-title="Päiväkirja" data-url="paivakirjaSivu" tabindex="0" class="ui-page ui-page-theme-a" style="padding-top: 102px; padding-bottom: 45px; min-height: 529px;">
  
	    <div role="main" class="ui-content ui-body-a" style="height: 497px;">
			<form action="#" method="post" id="lisaaMatkatapahtumaLomake" novalidate="novalidate">
	            <div class="ui-field-contain">
                    <label for="otsikko">Otsikko</label>
                    <div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset"><input id="otsikko" name="otsikko" type="text"></div> 
                </div>
				
                <div class="ui-field-contain">
                    <label for="paiva">Päivä</label>
                    <div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset ui-input-has-clear"><input id="paiva" name="paiva" placeholder="Tapahtumapäivä" readonly="readonly" value="16.03.2017" type="text"><a href="#" class="ui-input-clear ui-btn ui-icon-calendar ui-btn-icon-notext ui-corner-all" title="Avaa päivämäärävalitsin">Avaa päivämäärävalitsin</a></div>
				</div> 
			
                <div class="ui-field-contain">
                    <label for="paikka">Paikka</label>
                    <div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset"><input id="paikka" name="paikka" type="text"></div>
                </div>  
                   
                <div class="ui-field-contain">
                    <label for="saa">Sää</label>
                    <div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset"><input id="saa" name="saa" type="text"></div>
                </div>  
                  
                <div class="ui-field-contain"> 
                    <label for="kuvaus">Kuvaus</label>
                    <textarea id="kuvaus" name="kuvaus" class="ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-textinput-autogrow" style="height: 52px;"></textarea>
                </div>               
     
                <button type="button" class="ui-btn ui-btn-inline ui-corner-all" id="lisaa" name="lisaa">Lisää</button>	
				<a href="#" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-icon-delete ui-btn-inline" id="tyhjenna" name="tyhjenna">Tyhjennä</a>	
			 </form> 
	    </div> <!-- /content -->
		
    </div> <!-- /page -->
	
	<div data-role="page" id="saaSivu" data-title="Sää" data-url="saaSivu" tabindex="0" class="ui-page ui-page-theme-a" style="padding-top: 102px; padding-bottom: 45px; min-height: 529px;">
  
	    <div role="main" class="ui-content ui-body-a" style="height: 497px;">
	
	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="etaisyysSivu" data-title="Etäisyys" data-url="etaisyysSivu" tabindex="0" class="ui-page ui-page-theme-a" style="padding-top: 102px; padding-bottom: 45px; min-height: 529px;">
  
	    <div role="main" class="ui-content ui-body-a" style="height: 497px;">
	
	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="ruokaSivu" data-title="Ruoka" data-url="ruokaSivu" tabindex="0" class="ui-page ui-page-theme-a ui-page-active" style="padding-top: 102px; padding-bottom: 45px; min-height: 529px;">
        
	    <div role="main" class="ui-content ui-body-a" style="height: 497px;">

	    </div> <!-- /content -->

    </div> <!-- /page -->
		

<!--
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
-->
    <script src="lisaosa_files/js" async="" defer="defer"></script>
    
    <script type="text/javascript">
        
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 60.2013725, lng: 24.9340407},
              zoom: 8
            })
        }

		$(document).one("pagebeforecreate", function () {
	
			$( "[data-role='header']" ).toolbar().enhanceWithin(); 
			$( "[data-role='footer']" ).toolbar(); 
		
			$("#popupMenu").popup().enhanceWithin(); 
			$("#panelMenu").panel().enhanceWithin(); 			
		})
        
          $(document).one("pagecreate", "#etusivu", function () {
              haeSisalto();
          })
        
        $(document).one("pagecreate", "#paivakirjaSivu", function () {
	 	     $("#paiva").val(tanaan());		
             $("#paiva").datebox(
                 {
                     mode: "calbox",
                     useFocus: true,
                     beforeToday: true,
                     overrideCalStartDay: 1,
                     usePlaceholder: "Tapahtumapäivä"
                 }
             )
             
            $("#lisaa").on("tap", function() {
                if ( $("#lisaaMatkatapahtumaLomake").valid() ) {
                    alert("ok");
                }
            })
            
            $("#tyhjenna").on("tap", function() {
                tyhjennaLomake();
                $("#paiva").val(tanaan());
            })
		})
        

		$(document).on("pagecontainershow", function(event, data){
			$(".ui-content").height(getRealContentHeight());
            if (data.toPage[0].id == "etusivu") {
                initMap();
            }
		})

		$(window).on("resize orientationchange", function(){
			$(".ui-content").height(getRealContentHeight());
		})
		
		function getRealContentHeight() {
			var activePage = $.mobile.pageContainer.pagecontainer("getActivePage"),
				screen = $.mobile.getScreenHeight(),
				header = $(".ui-header").hasClass("ui-header-fixed") ? $(".ui-header").outerHeight() - 1 : $(".ui-header").outerHeight(),
				footer = $(".ui-footer").hasClass("ui-footer-fixed") ? $(".ui-footer").outerHeight() - 1 : $(".ui-footer").outerHeight(),
				contentMargins = $(".ui-content", activePage).outerHeight() - $(".ui-content", activePage).height();
			
			var contentHeight = screen - header - footer - contentMargins;	
			
			return contentHeight;
		}
		
		$( document ).on("pagecontainerchange", function() {
			navi();
		})


		$(document).on("swipeleft", ".ui-page", function(event) { 
	
			if(event.handled !== true) { // Annetaan tapahtua vain kerran
				var nextpage = $(this).next("div[data-role='page']");
				
				if (nextpage.length == 0) {
					nextpage = $("div[data-role='page']:first");
				}
		
				$.mobile.pageContainer.pagecontainer ("change", nextpage);
				event.handled = true;
				navi();
			}
			return false;
		})
		
		$(document).on("swiperight", ".ui-page", function(event) { 
		
			if(event.handled !== true) {
				var prevpage = $(this).prev("div[data-role='page']");

				if (prevpage.length == 0) {
					prevpage = $("div[data-role='page']:last");
				}
				
				$.mobile.pageContainer.pagecontainer ("change", prevpage);
				event.handled = true;
				navi();
			}
			return false;
		})

/*
		$(document).on("swiperight", ".ui-page", function(event) {
			$( "#panelMenu" ).panel( "open" );
		})
*/
		
		function navi() {
			// attribuutti data-title
			var current = $( ".ui-page-active" ).jqmData( "title" );// data-title
			
			$( "[data-role='header'] h1" ).text( current );
			
			$( "[data-role='navbar'] a.ui-btn-active" ).removeClass( "ui-btn-active" );
			
			$( "[data-role='navbar'] a" ).each(function() {
				if ( $( this ).text() === current ) {
					$( this ).addClass( "ui-btn-active" );
				}
			})
		}
        
        function tanaan() {
			var nyt = new Date();
			var kuukausi = nyt.getMonth() + 1;
			if (kuukausi < 10) {
				kuukausi = "0" + kuukausi;
			}
			
			var paiva = nyt.getDate();
			if (paiva < 10) {
				paiva = "0" + paiva;
			}
			
			var vuosi = nyt.getFullYear();
			
			return paiva + "." + kuukausi + "." + vuosi;
		
		}
        
        var validator = $("#lisaaMatkatapahtumaLomake").validate({
			errorClass: "virhe",
			errorElement: "div",				
			rules: {
				otsikko:  {
					required: true,
                    minlength: 5,
                    maxlength: 30,
				},	
				paikka:  {
                    minlength: 2,
                    maxlength: 50,
				},	
				saa:  {
					
				},
				kuvaus:  {
					required: true,
				},	
			},
			messages: {
				otsikko: {
					required: "Syötä otsikko",
                    minlength: jQuery.validator.format("Vähintään {0} merkkiä"),
                    maxlength: jQuery.validator.format("Enintään {0} merkkiä"),
				},
				paikka: {
                    minlength: jQuery.validator.format("Vähintään {0} merkkiä"),
                    maxlength: jQuery.validator.format("Enintään {0} merkkiä"),			
				},
				saa: {
					
				},
				kuvaus: {
					required: "Syötä kuvaus",
				},
			},
			highlight: function(element) {
				$(element).addClass("kenttaVirhe");
			}, 
			unhighlight: function(element) {
				$(element).removeClass("kenttaVirhe");
			},
			errorPlacement: function(error, element) {
				error.insertAfter(element.parent());
			},
		}) // validator
	     
        function tyhjennaLomake() {
            $("#lisaaMatkatapahtumaLomake input, #lisaaMatkatapahtumaLomake textarea").each(function() {
                $(this).val("");
            })
            
        }
        	function haeSisalto() {
			$.ajax({
                url: "http://myy.haaga-helia.fi/~marsi/JSON/aikatauluMobiili.json",
                dataType: "json",
                timeout: 5000
            })
			.done(function(data) {
				var rivit = "";
                $.each(data, function(index, sisalto) {
                    // rivit = rivit + sisalto.otsikko;
                    rivit = rivit + '<div data-role="collapsible"><h3>' + sisalto.otsikko + '</h3><p>' + sisalto.kuvaus + '</p></div>\n';
                })
               // alert(rivit);
                $("#sisalto").html(rivit).collapsibleset("refresh");
            })
		}
		
		function haeSaa(lat, lon) {
			$.ajax({
                url: "http://api.openweathermap.org/data/2.5/weather?lang=fi&lat=" + lat + "&lon=" + lon + "&units=metric&APPID=LAITA TÄNNE OMA APPID:SI",
                dataType: "json",
                timeout: 5000
            })
			.done(function(data) {
				
            })
			.fail(function() {
 			    
			})
		}
		
		function haeRuokalista() {
			$.ajax({
				url: "http://www.amica.fi/modules/json/json/Index?costNumber=0083&language=fi",
				dataType: "json",
				timeout: 5000
			})
			.done(function( data ) {
					
            })
			.fail (function() {
               
            })	
		}
		
		function haeLahella(lat, lon, etaisyys) {  				
			$.ajax({
				url: "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=" + lat + "," + lon +"&radius=" + etaisyys + "&type=restaurant&key=LAITA TÄNNE OMA KEY",
				dataType: "json",
  			})	
			.done(function(data){
				
			})
			.fail(function() {
				
			})	
			.complete(function() {
				
			})			
		}
    </script>



<div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon-loading"></span><h1>loading</h1></div><div class="ui-screen-hidden ui-popup-screen ui-overlay-inherit" id="popupMenu-screen"></div><div class="ui-popup-container ui-popup-hidden ui-popup-truncate pop" id="popupMenu-popup"><div data-role="popup" id="popupMenu" data-transition="pop" data-theme="a" class="ui-popup ui-body-a ui-overlay-shadow ui-corner-all">
		<a href="#" data-rel="back" class="ui-btn ui-btn-inline ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-right">Sulje</a>

		<ul data-role="listview" class="ui-listview">
			<li class="ui-first-child"><a href="#etusivu" class="ui-btn">Etusivu</a></li>
			<li><a href="#paivakirjaSivu" class="ui-btn">Päiväkirja</a></li>
			<li><a href="#saaSivu" class="ui-btn">Sää</a></li>
			<li><a href="#etaisyysSivu" class="ui-btn">Etäisyys</a></li>
			<li class="ui-last-child"><a href="#ruokaSivu" class="ui-btn">Ruoka</a></li>
		</ul>
	</div></div><div class="ui-panel-dismiss"></div><div data-role="footer" data-theme="b" data-position="fixed" role="contentinfo" class="ui-footer ui-bar-b ui-footer-fixed slideup">
		<h4 class="ui-title" role="heading" aria-level="1">Mobiiliohjelmointi</h4>
	</div></body></html>