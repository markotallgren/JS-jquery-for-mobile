<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  
  	<meta http-equiv="Content-Security-Policy" content="
		default-src 'self' 'unsafe-inline' ws://10.3.124.233:3000 https://maps.googleapis.com https://csi.gstatic.com/ https://khms0.googleapis.com/ https://khms1.googleapis.com/ https://maps.gstatic.com/ https://fonts.gstatic.com/ https://fonts.googleapis.com/ http://ajax.aspnetcdn.com/ http://code.jquery.com https://code.jquery.com http://cdn.jtsage.com https://ssl.gstatic.com gap: data: blob: filesystem: ; 
	" />
	
    <link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">

	<script
	src="https://code.jquery.com/jquery-2.1.4.js"
	integrity="sha256-siFczlgw4jULnUICcdm9gjQPZkw/YPDqhQ9+nAOScE4="
	crossorigin="anonymous"></script>
	
	<script 
    src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    

<link href="http://cdn.jtsage.com/jtsage-datebox/4.1.1/jtsage-datebox-4.1.1.jqm.min.css" rel="stylesheet" type="text/css">
    
<script src="http://cdn.jtsage.com/jtsage-datebox/4.1.1/jtsage-datebox-4.1.1.jqm.min.js" type="text/javascript"></script>
    
<script src="http://cdn.jtsage.com/jtsage-datebox/i18n/jtsage-datebox.i18n.fi.utf8.min.js" type="text/javascript"></script>

<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>


    <link rel="stylesheet" type="text/css" href="css/index.css" />

	<link rel="stylesheet" type="text/css" href="css/icon-pack-custom.css" />

	<link rel="stylesheet" href="css/themes/my-custom-theme.css" />
    <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
<!--
    <link rel="stylesheet" href="css/themes/mobiili.css" />
-->
    <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
   
    <style type="text/css">
       
        .virhe {
            color: red;
            font-size:130%;
            
        }
        
        input.kenttaVirhe, textarea.kenttaVirhe {
            border: 1px solid red !important;
        }
        
        #map {
            height: 100%;
        }
    
    </style>
    
    <title>Mobiiliohjelmointi</title>
</head>

<body>	
	<div data-role="popup" id="popupMenu" data-transition="pop" data-theme="a">
		<a href="#" data-rel="back" class="ui-btn ui-btn-inline ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-right">Sulje</a>

		<ul data-role="listview">
			<li><a href="#etusivu" class="ui-btn">Etusivu</a></li>
			<li><a href="#paivakirjaSivu" class="ui-btn">Päiväkirja</a></li>
			<li><a href="#saaSivu"  class="ui-btn">Sää</a></li>
			<li><a href="#etaisyysSivu" class="ui-btn">Etäisyys</a></li>
			<li><a href="#ruokaSivu" class="ui-btn">Ruoka</a></li>
		</ul>
	</div>
	
	<!-- Vain dynaamiset header ja footer ominaisuudella data-position="fixed" pysyvät paikallaan vilkkumatta, kun sivua vaihdetaan -->
	<div data-role="header" data-theme="a" data-position="fixed">
		<a href="#popupMenu" data-rel="popup" data-transition="flip" class="ui-btn ui-btn-inline  ui-corner-all ui-icon-bars ui-btn-icon-notext">Menu</a>
		<h1></h1>
		<div data-role="navbar" id="navi">
			<ul>
				<li><a href="#etusivu" class="ui-btn ui-icon-home ui-btn-icon-top  ui-mini">Etusivu</a></li>
				<li><a href="#paivakirjaSivu" class="ui-btn ui-icon-briefcase ui-btn-icon-top ui-mini">Päiväkirja</a></li>
				<li><a href="#saaSivu"  class="ui-btn ui-icon-umbrella ui-btn-icon-top ui-mini">Sää</a></li>
				<li><a href="#etaisyysSivu" class="ui-btn ui-icon-glass ui-btn-icon-top ui-mini">Etäisyys</a></li>
				<li><a href="#ruokaSivu" class="ui-btn ui-icon-cutlery ui-btn-icon-top ui-mini">Ruoka</a></li>

			</ul>
		</div>
	</div>
	
	<div data-role="footer" data-theme="b" data-position="fixed">
		<h4>Mobiiliohjelmointi</h4>
	</div>
	
	<div data-role="panel" id="panelMenu" data-display="overlay" data-theme="a"> 
		<ul data-role="listview">
			<li><a href="#etusivu" class="ui-btn">Etusivu</a></li>
			<li><a href="#paivakirjaSivu" class="ui-btn">Päiväkirja</a></li>
			<li><a href="#saaSivu"  class="ui-btn">Sää</a></li>
			<li><a href="#etaisyysSivu" class="ui-btn">Etäisyys</a></li>
			<li><a href="#ruokaSivu" class="ui-btn">Ruoka</a></li>
		</ul>
	</div>
		 
	<div data-role="page" id="etusivu" data-title="Etusivu">
	
	    <div role="main" class="ui-content ui-body-a">
            
            <div id="map"></div>

	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="paivakirjaSivu" data-title="Päiväkirja">
  
	    <div role="main" class="ui-content ui-body-a">
			<form action="#" method="post" id="lisaaMatkatapahtumaLomake">
	            <div class="ui-field-contain">
                    <label for="otsikko">Otsikko</label>
                    <input type="text" id="otsikko" name="otsikko"> 
                </div>
				
                <div class="ui-field-contain">
                    <label for="paiva">Päivä</label>
                    <input type="text" id="paiva" name="paiva">
				</div> 
			
                <div class="ui-field-contain">
                    <label for="paikka">Paikka</label>
                    <input type="text" id="paikka" name="paikka">
                </div>  
                   
                <div class="ui-field-contain">
                    <label for="saa">Sää</label>
                    <input type="text" id="saa" name="saa">
                </div>  
                  
                <div class="ui-field-contain"> 
                    <label for="kuvaus">Kuvaus</label>
                    <textarea id="kuvaus" name="kuvaus"></textarea>
                </div>               
     
                <button type="button" class="ui-btn ui-corner-all ui-btn-inline" id="lisaa" name="lisaa">Lisää</button>	
				<a href="#" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-icon-delete ui-btn-inline" id="tyhjenna" name="tyhjenna">Tyhjennä</a>	
			 </form> 
	    </div> <!-- /content -->
		
    </div> <!-- /page -->
	
	<div data-role="page" id="saaSivu" data-title="Sää">
  
	    <div role="main" class="ui-content ui-body-a">
	
	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="etaisyysSivu" data-title="Etäisyys">
  
	    <div role="main" class="ui-content ui-body-a">
	
	    </div> <!-- /content -->

    </div> <!-- /page -->
	
	<div data-role="page" id="ruokaSivu" data-title="Ruoka">
        
	    <div role="main" class="ui-content ui-body-a">

	    </div> <!-- /content -->

    </div> <!-- /page -->
		

<!--
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
-->
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAo0o00DueOUY9fJEG1BiFvqE53dZEayr0&callback=initMap"
    async defer></script>
    
    <script type="text/javascript">
        
        function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 60.2013725, lng: 24.9340407},
          zoom: 16
        })
          var marker = new google.maps.Marker({
          position: {lat: 60.2013725, lng: 24.9340407},
          map: map
        })
      }

		$(document).one("pagebeforecreate", function () {
	
			$( "[data-role='header']" ).toolbar().enhanceWithin(); 
			$( "[data-role='footer']" ).toolbar(); 
		
			$("#popupMenu").popup().enhanceWithin(); 
			$("#panelMenu").panel().enhanceWithin(); 			
		})
        
        $(document).one("pagecreate", "#paivakirjaSivu", function () {
	 	     $("#paiva").val(tanaan());		
             $("#paiva").datebox(
                 {
                     mode: "calbox",
                     useFocus: true,
                     beforeToday: true,
                     overrideCalStartDay: 1,
                     usePlaceholder: "Tapahtumapäivä"
                 }
             )
        
        $("#lisaa").on("tap", function() {
            if ($("#lisaaMatkatapahtumaLomake").valid()) {
                    alert("ok"); 
                }
            
            })
        
        $("#tyhjenna").on("tap", function() {
            tyhjennaLomake();
            $("#paiva").val(tanaan());
        })
        
        })
        

		$(document).on("pagecontainershow", function(){
			$(".ui-content").height(getRealContentHeight());
		})

		$(window).on("resize orientationchange", function(){
			$(".ui-content").height(getRealContentHeight());
		})
		
		function getRealContentHeight() {
			var activePage = $.mobile.pageContainer.pagecontainer("getActivePage"),
				screen = $.mobile.getScreenHeight(),
				header = $(".ui-header").hasClass("ui-header-fixed") ? $(".ui-header").outerHeight() - 1 : $(".ui-header").outerHeight(),
				footer = $(".ui-footer").hasClass("ui-footer-fixed") ? $(".ui-footer").outerHeight() - 1 : $(".ui-footer").outerHeight(),
				contentMargins = $(".ui-content", activePage).outerHeight() - $(".ui-content", activePage).height();
			
			var contentHeight = screen - header - footer - contentMargins;	
			
			return contentHeight;
		}
		
		$( document ).on("pagecontainerchange", function() {
			navi();
		})


		/* $(document).on("swipeleft", ".ui-page", function(event) { 
	
			if(event.handled !== true) { // Annetaan tapahtua vain kerran
				var nextpage = $(this).next("div[data-role='page']");
				
				if (nextpage.length == 0) {
					nextpage = $("div[data-role='page']:first");
				}
		
				$.mobile.pageContainer.pagecontainer ("change", nextpage);
				event.handled = true;
				navi();
			}
			return false;
		})
		
	    $(document).on("swiperight", ".ui-page", function(event) { 
		
			if(event.handled !== true) {
				var prevpage = $(this).prev("div[data-role='page']");

				if (prevpage.length == 0) {
					prevpage = $("div[data-role='page']:last");
				}
				
				$.mobile.pageContainer.pagecontainer ("change", prevpage);
				event.handled = true;
				navi();
			}
			return false;
		}) */

/*
		$(document).on("swiperight", ".ui-page", function(event) {
			$( "#panelMenu" ).panel( "open" );
		})
*/
		
		function navi() {
			// attribuutti data-title
			var current = $( ".ui-page-active" ).jqmData( "title" );// data-title
			
			$( "[data-role='header'] h1" ).text( current );
			
			$( "[data-role='navbar'] a.ui-btn-active" ).removeClass( "ui-btn-active" );
			
			$( "[data-role='navbar'] a" ).each(function() {
				if ( $( this ).text() === current ) {
					$( this ).addClass( "ui-btn-active" );
				}
			})
		}
        
        function tanaan() {
			var nyt = new Date();
			var kuukausi = nyt.getMonth() + 1;
			if (kuukausi < 10) {
				kuukausi = "0" + kuukausi;
			}
			
			var paiva = nyt.getDate();
			if (paiva < 10) {
				paiva = "0" + paiva;
			}
			
			var vuosi = nyt.getFullYear();
			
			return paiva + "." + kuukausi + "." + vuosi;
		
		}
        
        	var validator = $("#lisaaMatkatapahtumaLomake").validate({
			errorClass: "virhe",
			errorElement: "div",				
			rules: {
				otsikko:  {
					required: true,
                    minlength: 5,
                    maxlength: 30,
				},	
				paikka:  {
					minlength: 2,
                    maxlength: 50,
				},	
				saa:  {
					
				},
				kuvaus:  {
					required: true,
				},	
			},
			messages: {
				otsikko: {
					required: "Syötä otsikko",
                    minlength: jQuery.validator.format("Vähintään {0} merkkiä"),
                    maxlength: jQuery.validator.format("Enintään {0} merkkiä"),
				},
				paikka: {
					minlength: jQuery.validator.format("Vähintään {0} merkkiä"),
                    maxlength: jQuery.validator.format("Enintään {0} merkkiä"),
				},
				saa: {
					
				},
				kuvaus: {
					required: "Syötä kuvaus",
				},
			},
			highlight: function(element) {
                $(element).addClass("kenttaVirhe");
				
			}, 
			unhighlight: function(element) {
				$(element).removeClass("kenttaVirhe");
			},
			errorPlacement: function(error, element) {
				error.insertAfter(element.parent());
			},
		}) // validator
            
            function tyhjennaLomake() {
                $("#lisaaMatkatapahtumaLomake input, #lisaaMatkatapahtumaLomake textarea").each(function() {
                    $(this).val("");
                })
                validator.resetForm();
                
            }
	     
    </script>

</body>

</html>